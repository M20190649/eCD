
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "www2019"
%%% End:

\section{Tracking in rectangle-like areas}
\label{sec:rectangle}

In this section, we develop a way to tracking a moving object in rectangle-like areas.


\subsection{Building the rectangle-like areas}

Like the circular area related to \sed and the strip area related to \ped, a rectangle-like area is also related to a Euclidean distance metric, namely the binary Euclidean distances of \sed and \ped.

\stitle{Binary Euclidean distances of \sed and \ped}, shortly \bed (\sed, \ped), is the combination of distance metrics \sed and \ped where their error bounds are set separately to $\epsilon_{sed}$ and $\epsilon_{ped}$, such that (1) if $\epsilon_{ped} \ge \epsilon_{sed}$, then it falls back to the \sed, otherwise, (2) it is the combination of a circular and a strip areas, and forms a rectangle-like shape whose short sides are replaced by circular arcs as shown in {Figure~\ref{fig:areas}-(3)}. Note that if $\epsilon_{ped} << \epsilon_{sed}$, then its effect is actually close to a \ped.


The shape of a rectangle-like area is indeed controlled by two parameters, $\epsilon_{ped}$ and $\epsilon_{sed}$. Hence we can control them to build such an area that balances two performance metrics, the compression ratios and the query errors, of trajectory simplification/tracking algorithms, and satisfies the needs of varied applications. 
\todo{demonstrate by an example of a car on a road...if circular, or strip, or rectangle-like.}


\subsection{Tracking by cone and sector}

\begin{theorem}
	\label{theo-binary}
	Given a sub-trajectory $[P_s,...,P_{s+k}]$ and two error bounds $\epsilon_{sed}$ and $\epsilon_{ped}$, it can be tracked in the rectangle-like area.
\end{theorem}

\begin{proof}
	\todo.
	1. traj simplification by cones and sectors.
	2. position tracking: one velocity, from the intersection of cones.
\end{proof}




\subsection{Implementation.}
We now present the algorithm of \underline{B}inary \underline{I}ntersection for \underline{T}rajectory \underline{T}racking (BITT) that tracks moving objects in combined areas of circular and strip by \sed and \ped, as shown in Figure~\ref{alg:bitt}. 
%
Indeed, it is a double check of cone intersection and sector intersection for each point for the purpose of trajectory simplification, and a double check of distance deviations for position tracking. And for position tracking, it uses a uniform velocity $\vv{v}$ for both checks of \sed and \ped. %If either \sed or \ped deviation breaks the threshold, then an update is triggered.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Algorithm: Traj tracking based on section intersection using full sectors.
\begin{figure}[tb!]   
	\begin{center}
		{\small
			\begin{minipage}{3.3in}
				\myhrule
				%\vspace{-1ex}
				\mat{0ex}{
					{\bf Algorithm}~\bitt $(\dddot{\mathcal{T}}[P_0,\ldots,P_n], ~\epsilon_{sed}, m, ~\epsilon_{ped})$\\
					%	\sstab
					\bcc \hspace{1ex}\= $P_s := P_0$; ~~~~$\mathcal{R}^*$ := \kw{getRPolygon}($P_s$, $P_{s+1}$, $\epsilon_{sed}$, $m$, $P_{s+1}.t$); \\
					\icc \hspace{1ex}\= $\mathcal{S}^*$ := \kw{getSector}($P_s$, $P_{s+1}$, $\epsilon_{ped}$); ~~~~$l_{m} = |P_sP_{s+1}|$;\\
					\icc \hspace{1ex}\= $|\vv{v}|:=\frac{|P_{s}P_{s+1}|}{P_{s+1}.t-P_s.t}$; ~~~~$\vv{v}.\theta:=\vv{P_{s}P_{s+1}}.\theta$;  \\
					\icc \hspace{1ex}\= update ($P_{s}, \vv{v}$); 	\\
					\icc \hspace{1ex}\= $i:= 2$;  	\\
					\icc \hspace{1ex}\= while $i \le n$ do \\
					\icc \>\hspace{3ex} if $\vv{P_sP_{i}}$ ~does not pass~ $\mathcal{S}^*~or~\mathcal{R}^*$, or $|P_sP_{i}| \le l_{m} - \epsilon$ then \\ % // updates velocity and location \\
					\icc \>\hspace{7ex}    $P_s := P_{i-1}$; ~~~~$\mathcal{R}^*$ := $\emptyset$;~~~~$\mathcal{S}^*$ := $\emptyset$; ~~~~$l_{m} = |P_sP_{i}|$;\\
					\icc \>\hspace{7ex}    $|\vv{v}|:=\frac{|P_sP_{i}|}{P_{i}.t-P_s.t}$; ~~~~$\vv{v}.\theta:=\vv{P_{s}P_{i}}.\theta$;  \\
					\icc \>\hspace{7ex}    update ($P_{s}, \vv{v}$); 	\\
					\icc \>\hspace{3ex} else if $\vv{P_sP_{i}}$ ~passes ~ $\mathcal{R}^*$ and $\mathcal{S}^*$, $|P_sP_{i}| > l_{m} - \epsilon$ \\ \hspace{9ex} ~and~ ($ped(P_i, \vv{v}) \ge \epsilon_{ped} ~or~ sed(P_i, \vv{v}) \ge \epsilon_{sed}) $ then  \\ %~// updates velocity only 
					\icc \>\hspace{7ex}    $|\vv{v}|:=\frac{|P_sP_{i}|}{P_{i}.t-P_s.t}$; ~~~~$\vv{v}.\theta:=\vv{P_sP_{i}}.\theta$; \\
					\icc \>\hspace{7ex}    update ($\vv{v}$); \\
					\icc \>\hspace{3ex} if $\mathcal{S}^*=\emptyset$ then $\mathcal{R}^*:=$ \kw{getRPolygon}($P_s$, $P_{i}$, $\epsilon_{sed}$, $m$, $P_{s+1}.t$); \\
					\icc \>\hspace{7ex}    $\mathcal{S}^*:=$ \kw{getSector}($P_s$, $P_{i}$, $\epsilon_{ped}$); \\
					\icc \>\hspace{3ex} else $\mathcal{R}^*:=$ \kw{getRPolygon}($P_s$, $P_{i}$, $\epsilon_{sed}$, $m$, $P_{s+1}.t$); \\
					\icc \>\hspace{7ex}    $\mathcal{S}^*$ := $\mathcal{S}^*\bigsqcap$ \kw{getSector}($P_s$, $P_{i}$, $\epsilon_{ped}$); $l_{m} = \max\{|P_sP_{i}|, l_{m}\}$;\\
					\icc \>\hspace{3ex} $i$ := $i +1$;\\
					\icc \>\hspace{0ex} update ($P_{n}$); 
				}
				\vspace{-2ex}
				\myhrule
			\end{minipage}
		}
	\end{center}
	\vspace{-1ex}
	\caption{\small Trajectory tracking based on sector and cone.}
	\label{alg:bitt}
	\vspace{-1ex}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\begin{example}
	\todo.
\end{example}

\stitle{Correctness and complexity.} \todo.

\eat{%%%%%%%%%%%%
weak tracking

-- principle, adjust velocity...
	must checking \textcolor{blue}{consistently} of cone, sector and interval, couple with ldr.
	if the common intersection of all metrics is false, then new line segment.
	otherwise, checks ldr, 	if any ldr is false, then adjust velocity, point select from the common area.
	
-- algorithm. intersection based trajectory tracking (ITT-W)

-- example

-- correctness and complexity
}%%%%%%%%%%%%eat

\stitle{Discuss.} Relations to position tracking and traj simplification.
