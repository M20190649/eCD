
\section{Method}
\label{sec-method}

In this section, we present our {trajectory simplification} aware map-matching method.


\begin{figure*}[htb!]
	\centering
  \includegraphics[width=0.89\textwidth, height  = 0.22\textwidth]{Figures/Fig-Architecture-en.pdf}\hspace{1ex}
	\vspace{-1ex}
	\caption{The framework of trajectory simplification aware map matching.}
	\label{fig:sys-arc}
	\vspace{-1ex}
\end{figure*}


\subsection{Overview of the Method}
The framework of {trajectory simplification} aware map-matching (\stmm) is illustrated in \myfig{fig:sys-arc}.
\stmm takes as input a raw trajectory and simplifies the raw trajectory by the trajectory simplification component. The output of the component is then injected into the HMM-based map-matching method, including two components, \emph{local path recovery} and \emph{global route decoding}, each utilizes the unique characteristics of the simplified trajectory to improve the accuracies and running time of map-matching.

\stitle{(1) Trajectory simplification.}
It simplifies the input stream of raw trajectory data points by dropping redundant points and keeping significant ones with an error bound. The output of the algorithm is a sequence of directed line segments associated with auxiliary information that is used in the consequent map-matching.

\stitle{(2) Local path recovery.}
This component is used to generate the local optimal path given any two neighboring points of a simplified trajectory.
It operates on an action graph, which is a weighted graph extracted from road network incorporating information from the raw trajectory, and is used to describe the actions of a user.  The optimal paths can be detected through the shortest path searching in the graph. Note when estimating the edge weights of an action graph, we consider the geometry similarities between the raw/simplified trajectories and the paths to better recover the local paths.

%When estimating the weights of edges of an action graph, we consider the distribution of the raw trajectory points in the simplified trajectories to better recover the local path.

\stitle{(3) Global route decoding.}
It is another core component of the HMM-based method. It computes the probability of each candidate route after the local optimal paths recovery, and finds the global optimal route through dynamic programming.
Also, we take the geometry similarity between the raw/simplified trajectories and the routes into considerations in the computation of transition probabilities.
%Based on the local optimal paths generated by Path recovery component,


\subsection{Trajectory Simplification}
\label{sec:simp}


\todo{what and why}

We choose two one-pass algorithms, \ie~\siped \cite{Zhao:Sleeve} using \ped and \cised\cite{Lin:Cised} using \sed, to carry out trajectory
simplification. \ped and \sed are two distance metrics widely used in trajectory simplification algorithms, more details about them please refer to \cite{Lin:Cised, Zhang:Evaluation}.

\todo{full epsilon of siped and cised, plus auxiliary information}

For a sub-trajectory $\dddot{\mathcal{T}}[P_s, ..., P_{s+u}]$, $u\ge 1$, simplified to a line segment $\vv{P_{s}P_{s+u}}$, \stmm also computes the auxiliary information of $\vv{P_{s}P_{s+u}}$, including $L_L$ and $L_R$, the length of raw sub-trajectory $\dddot{\mathcal{T}}[P_s, ..., P_{s+u}]$ on the left and right sides of the simplified line segment $\vv{P_{s}P_{s+u}}$, respectively. 
%
%The distribution of the raw sub-trajectory points according to a simplified line segment can be calculated and saved in advance during trajectory simplification.
Indeed, the distribution of raw trajectory points \wrt the simplified line segments is quite uneven.
%\myfig{fig:traj-sides} is a typical example of the uneven distribution phenomenon, where green lines are simplified line segments and blue
%points are raw trajectory points, and
\myfig{fig:traj-side-stat} shows the percentage of points on one side of the simplified line segments, where more than $85\%$ of raw trajectory points are located on one side of the simplified line segments.
This information is a hint to select the right path/route, hence, it is used in the local path recovery and the global route decoding.

\begin{figure}
  \centering
  \begin{subfigure}{0.34\textwidth}
    \centering
    \includegraphics[width = \textwidth, height = 0.66\textwidth]{Figures/Exp-statistic-side-ratio.png}
  \end{subfigure}
  \vspace{-2ex}
  \caption{\small Distribution of trajectory points.} \vspace{-3ex}
  \label{fig:traj-side-stat}
  \vspace{1ex}
\end{figure}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{sec-route-rec}

\input{sec-hmm}

% \input{sec-alg}
